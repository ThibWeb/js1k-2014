function e(b,d){return b[0]==d[0]&&b[1]==d[1]}var f,h,k,l=a.width,m=a.height,n=10,p=l/n,q=m/n,r=[],s="r",t=s,u=[6,6];function v(){s=t="r";r=[[6,4],[5,4],[4,4]];f=0;k=99;document.onkeydown=function(b){var d=b.which,g={37:"l",38:"u",39:"r",40:"d"}[d];g?(-1!=={b:["u","d"],c:["u","d"],d:["l","r"],a:["l","r"]}[s].indexOf(g)&&(t=g),b.preventDefault()):32===d&&(clearTimeout(h),v())};w()}
function w(){c.clearRect(0,0,l,m);var b=r[0].slice();s=t;switch(s){case "l":b[0]--;break;case "u":b[1]--;break;case "r":b[0]++;break;case "d":b[1]++}r.unshift(b);e(r[0],u)?(u=[Math.floor(Math.random()*p+1)-1,Math.floor(Math.random()*q+1)-1],k*=0.95,f++):r.pop();c.fillStyle="tomato";r.forEach(function(b){c.fillRect(n*b[0],n*b[1],n,n)});c.font="bold 20px sans-serif";c.fillText(f,l-20,m-20);c.fillStyle="lime";c.beginPath();b=n/2;c.arc(u[0]*n+b,u[1]*n+b,b,0,2*Math.PI,1);c.fill();var d=r[0],b=d[0],g=d[1],
x=0;r.slice(1).forEach(function(b){e(d,b)&&(x=1)});!b||b>p||!g||g>q||x||(h=setTimeout(w,k))}v();
