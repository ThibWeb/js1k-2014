function equalCoordinates(e,o){return e[0]===o[0]&&e[1]===o[1]}function init(){direction="r",snakePos=[],snakePos.push([6,4]),snakePos.push([5,4]),snakePos.push([4,4]),score=0,frameInterval=100;var e={37:"l",38:"u",39:"r",40:"d"};document.onkeydown=function(o){var t=o.which,i=e[t];if(i){var n={l:["u","d"],r:["u","d"],u:["l","r"],d:["l","r"]};-1!==n[direction].indexOf(i)&&(nextDirection=i),o.preventDefault()}else 32===t&&(clearTimeout(timeout),init())},loop()}function loop(){c.clearRect(0,0,width,height);var e=snakePos[0].slice();switch(direction=nextDirection){case"l":e[0]-=1;break;case"u":e[1]-=1;break;case"r":e[0]+=1;break;case"d":e[1]+=1}snakePos.unshift(e),equalCoordinates(snakePos[0],applePos)?(applePos=[random(1,widthInBlocks-2),random(1,heightInBlocks-2)],frameInterval*=.95,score++):snakePos.pop(),c.fillStyle="tomato",snakePos.forEach(function(e){c.fillRect(block*e[0],block*e[1],block,block)}),c.fillStyle="lime",c.beginPath();var o=block/2;c.arc(applePos[0]*block+o,applePos[1]*block+o,o,0,2*Math.PI,!0),c.fill(),c.font="bold 20px serif",c.fillStyle="red",c.fillText(score,width-20,height-20);var t=snakePos[0],i=t[0],n=t[1],a=1>i||i>widthInBlocks,l=1>n||n>heightInBlocks,r=!1;snakePos.slice(1).forEach(function(e){equalCoordinates(t,e)&&(r=!0)}),a||l||r||(timeout=setTimeout(loop,frameInterval))}function random(e,o){return Math.floor(Math.random()*(o-e+1)+e)}var score,timeout,frameInterval,width=a.width,height=a.height,block=10,widthInBlocks=width/block,heightInBlocks=height/block,snakePos=[],direction="r",nextDirection=direction,applePos=[6,6];init();