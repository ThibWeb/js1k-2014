!function(){"use strict";function t(t){for(var e=o.getImageData(0,0,d.width,d.height),n=e.data.length,a=0,i=0;n>i;i+=4)e.data[i]===t.r&&e.data[i+1]===t.g&&e.data[i+2]===t.b&&a++;return a}function e(t,e){var n=4*(t+e*f.width);return{r:f.data[n],g:f.data[n+1],b:f.data[n+2],a:f.data[n+3]}}function n(){var e=t(u);return 2.5*e>s}function a(t,n){var a=e(t,n);return 0!==a.a}function i(t){return 0<t.x&&t.x<=d.width&&0<t.y&&t.y<=d.height}function r(t,e){a(t,e)?(o.beginPath(),i(v)&&o.moveTo(v.x,v.y),o.lineTo(t,e),o.stroke(),o.closePath()):(g=!1,alert(":("))}var l=Math.random().toString(36).slice(-1),d=document.getElementById("js-paint"),o=d.getContext("2d");d.height=480,d.width=320,o.lineWidth=20,o.lineCap="round";var u={r:30,g:30,b:60,a:1};o.strokeStyle="rgba("+u.r+", "+u.g+", "+u.b+", "+u.a+")",o.font="bold 300px helvetica";var c={r:200,g:30,b:30,a:1};o.fillStyle="rgba("+c.r+", "+c.g+", "+c.b+", "+c.a+")",o.textBaseline="middle";var h={x:(d.width-o.measureText(l).width)/2,y:d.height/2};o.fillText(l,h.x,h.y);var g=!1,v={x:null,y:null},f=o.getImageData(0,0,d.width,d.height),s=t(c);d.addEventListener("mouseup",function(t){g=!1,n()&&alert(":)"),t.preventDefault()}),d.addEventListener("mousedown",function(t){g=!0,t.preventDefault()}),d.addEventListener("mousemove",function(t){g&&r(t.clientX,t.clientY),v.x=t.clientX,v.y=t.clientY}),document.addEventListener("mousemove",function(t){var e={x:t.clientX,y:t.clientY};i(e)||(v.x=null,v.y=null)})}();